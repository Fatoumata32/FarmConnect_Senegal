{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Communauté" %} - FarmConnect Senegal{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section */
    .hero {
        background: linear-gradient(135deg, rgba(45, 80, 22, 0.8) 0%, rgba(74, 124, 89, 0.8) 100%), url('{% static "img/hero_background.jpg" %}');
        background-size: cover;
        background-position: center;
        color: var(--pure-white);
        padding: 5rem 0;
        text-align: center;
        position: relative;
        overflow: hidden;
        margin: 0;
    }

    .hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(244, 208, 63, 0.1) 50%, transparent 70%);
        animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

    .hero-content {
        position: relative;
        z-index: 1;
    }

    .hero h1 {
        font-size: 3.5rem;
        margin-bottom: 1.5rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        animation: fadeInUp 1s ease;
    }

    .hero p {
        font-size: 1.3rem;
        margin-bottom: 2.5rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        color: var(--pure-white);
    }

    .cta-button {
        background: linear-gradient(135deg, var(--accent-yellow) 0%, #f7dc6f 100%);
        color: var(--primary-green);
        padding: 1.2rem 3rem;
        border: none;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 8px 20px rgba(244, 208, 63, 0.3);
        text-decoration: none;
        display: inline-block;
    }

    .cta-button:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 25px rgba(244, 208, 63, 0.4);
        color: var(--primary-green);
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Main Sections */
    .section {
        padding: 5rem 0;
        margin: 0;
    }

    .section:nth-child(even) {
        background: var(--pure-white);
    }

    .section-title {
        text-align: center;
        font-size: 3rem;
        color: var(--primary-green);
        margin-bottom: 3rem;
        position: relative;
    }

    .section-title::after {
        content: '';
        display: block;
        width: 100px;
        height: 4px;
        background: var(--accent-yellow);
        margin: 1.5rem auto;
        border-radius: 2px;
    }

    /* Features Grid */
    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
    }

    .feature-card {
        background: var(--pure-white);
        padding: 2rem;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .feature-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(135deg, var(--primary-green) 0%, var(--light-green) 100%);
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    .feature-icon {
        font-size: 3rem;
        color: var(--light-green);
        margin-bottom: 1.5rem;
        display: block;
    }

    .feature-card h3 {
        color: var(--primary-green);
        font-size: 1.5rem;
        margin-bottom: 1rem;
        font-weight: bold;
    }

    .feature-card p {
        color: var(--text-dark);
        line-height: 1.8;
    }

    /* Community Grid */
    .community-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
    }

    .community-card {
        background: var(--pure-white);
        border: 2px solid var(--light-green);
        border-radius: 15px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
    }

    .community-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }

    .community-card .icon {
        font-size: 3rem;
        color: var(--light-green);
        margin-bottom: 1rem;
        display: block;
    }

    .community-card h3 {
        color: var(--primary-green);
        font-size: 1.3rem;
        margin-bottom: 1rem;
    }

    /* Workshop Section */
    .workshop-highlights {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin: 3rem 0;
    }

    .workshop-card {
        background: linear-gradient(135deg, var(--primary-green) 0%, var(--light-green) 100%);
        color: var(--pure-white);
        padding: 2rem;
        border-radius: 15px;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .workshop-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    .workshop-card .icon {
        font-size: 3rem;
        color: var(--accent-yellow);
        margin-bottom: 1rem;
    }

    .workshop-card h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        color: var(--accent-yellow);
    }

    /* Stats Cards */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .stat-card {
        background: var(--pure-white);
        padding: 1.5rem;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .stat-number {
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--primary-green);
    }

    .stat-label {
        color: var(--text-dark);
        font-weight: 500;
    }

    /* Remove extra space */
    .section:last-of-type {
        margin-bottom: 0 !important;
        padding-bottom: 0 !important;
    }

    /* CTA Section */
    .cta-section {
        background: linear-gradient(135deg, var(--accent-yellow) 0%, #f7dc6f 100%);
        color: var(--primary-green);
        padding: 5rem 0 10rem 0;
        text-align: center;
        margin: 0;
    }

    .cta-section h2 {
        font-size: 2.5rem;
        margin-bottom: 1.5rem;
        font-weight: bold;
    }

    .cta-section p {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .cta-buttons {
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .btn-primary,
    .btn-secondary {
        padding: 1rem 2rem;
        border: none;
        border-radius: 50px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .btn-primary {
        background: var(--primary-green);
        color: var(--pure-white);
    }

    .btn-secondary {
        background: transparent;
        color: var(--primary-green);
        border: 2px solid var(--primary-green);
    }

    .btn-primary:hover,
    .btn-secondary:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }

    .btn-primary:hover {
        color: var(--pure-white);
    }

    .btn-secondary:hover {
        color: var(--primary-green);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .hero h1 {
            font-size: 2.5rem;
        }

        .hero p {
            font-size: 1.1rem;
        }

        .features-grid,
        .community-grid,
        .workshop-highlights {
            grid-template-columns: 1fr;
        }

        .cta-buttons {
            flex-direction: column;
            align-items: center;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="fade-down">{% trans "Cultivons Ensemble l'Avenir" %}</h1>
            <p class="fade-up">{% trans "Rejoignez FarmConnect Senegal, la plateforme qui unit les agriculteurs sénégalais pour partager des connaissances, accéder à des outils modernes et booster la productivité agricole. Ensemble, transformons l'agriculture pour un avenir durable et prospère." %}</p>
            {% if not user.is_authenticated %}
            <a href="{% url 'farmconnect_app:register' %}" class="cta-button float-animate">{% trans "Rejoindre Notre Communauté" %}</a>
            {% else %}
            <a href="{% url 'farmconnect_app:dashboard' %}" class="cta-button float-animate">{% trans "Accéder à Mon Tableau de Bord" %}</a>
            {% endif %}
        </div>
    </div>
</section>

<!-- Hero Image -->
<div class="container">
    <div class="row">
        <div class="col-12">
            <figure class="text-center">
                <img src="{% static 'img/together.jpg' %}"
                     alt="{% trans 'Agriculteurs sénégalais travaillant ensemble dans les champs' %}"
                     class="img-fluid rounded-3 my-4"
                     style="max-width: 100%; height: auto; max-height: 500px; object-fit: cover;">
                <figcaption class="text-muted mt-2">
                    {% trans "Agriculteurs collaborant dans les champs sénégalais" %}
                </figcaption>
            </figure>
        </div>
    </div>
</div>

<!-- Stats Section -->
<div class="container">
    <div class="stats-grid stagger-children">
        <div class="stat-card scale-up">
            <div class="stat-number">{{ total_farmers|default:"5000+" }}</div>
            <div class="stat-label">{% trans "Agriculteurs Connectés" %}</div>
        </div>
        <div class="stat-card scale-up">
            <div class="stat-number">{{ total_regions|default:"14" }}</div>
            <div class="stat-label">{% trans "Régions Couvertes" %}</div>
        </div>
        <div class="stat-card scale-up">
            <div class="stat-number">{{ total_workshops|default:"100+" }}</div>
            <div class="stat-label">{% trans "Ateliers Organisés" %}</div>
        </div>
        <div class="stat-card scale-up">
            <div class="stat-number">{{ total_crops|default:"50+" }}</div>
            <div class="stat-label">{% trans "Cultures Supportées" %}</div>
        </div>
    </div>
</div>

<!-- Market Prices Section -->
{% if latest_prices %}
<section class="section" style="background: var(--pure-white);">
    <div class="container">
        <h2 class="section-title">{% trans "Prix du Marché" %}</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 2rem; color: var(--text-dark);">
            {% trans "Consultez les prix actuels des produits agricoles dans les différentes régions du Sénégal." %}
        </p>
        <div class="row">
            {% for price in latest_prices %}
            <div class="col-md-4 col-sm-6 mb-3">
                <div class="card h-100" style="border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <div class="card-body">
                        <h5 class="card-title" style="color: var(--primary-green);">{{ price.crop_name }}</h5>
                        <p class="card-text">
                            <strong style="font-size: 1.5rem; color: var(--primary-green);">{{ price.price_per_kg }} FCFA</strong>/kg
                            <br>
                            <small class="text-muted">{{ price.get_region_display }}</small>
                        </p>
                        <span class="badge {% if price.trend == 'up' %}bg-success{% elif price.trend == 'down' %}bg-danger{% else %}bg-secondary{% endif %}">
                            {% if price.trend == 'up' %}
                            <i class="fas fa-arrow-up"></i> +{{ price.percentage_change }}%
                            {% elif price.trend == 'down' %}
                            <i class="fas fa-arrow-down"></i> {{ price.percentage_change }}%
                            {% else %}
                            <i class="fas fa-minus"></i> Stable
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Upcoming Events Section -->
{% if upcoming_events %}
<section class="section">
    <div class="container">
        <h2 class="section-title">{% trans "Événements à Venir" %}</h2>
        <p style="text-align: center; max-width: 800px; margin: 0 auto 2rem; color: var(--text-dark);">
            {% trans "Participez aux ateliers, formations et rencontres organisés dans votre région." %}
        </p>
        <div class="row">
            {% for event in upcoming_events %}
            <div class="col-md-6 col-lg-4 mb-4">
                <div class="card h-100" style="border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); overflow: hidden;">
                    <div class="card-header" style="background: linear-gradient(135deg, var(--primary-green) 0%, var(--light-green) 100%); color: white;">
                        <h5 class="mb-0">{{ event.title }}</h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">{{ event.description|truncatewords:20 }}</p>
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-calendar text-primary"></i> {{ event.date|date:"d M Y" }}</li>
                            <li><i class="fas fa-clock text-info"></i> {{ event.start_time|time:"H:i" }}</li>
                            <li><i class="fas fa-map-marker-alt text-danger"></i> {{ event.location }}</li>
                            <li><i class="fas fa-globe text-success"></i> {{ event.get_region_display }}</li>
                        </ul>
                        <span class="badge" style="background-color: {{ event.get_event_type_color }}; color: white;">
                            {{ event.get_event_type_display }}
                        </span>
                        {% if event.is_free %}
                        <span class="badge bg-info">{% trans "Gratuit" %}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Community Section -->
<section id="community" class="section">
    <div class="container">
        <h2 class="section-title fade-down">{% trans "Notre Communauté Unie" %}</h2>
        <p class="fade-up" style="text-align: center; max-width: 800px; margin: 0 auto 3rem; color: var(--text-dark);">
            {% trans "FarmConnect Senegal est plus qu'une plateforme : c'est une communauté vibrante où les agriculteurs partagent leurs expériences, apprennent des experts et collaborent pour une agriculture sénégalaise plus forte." %}
        </p>
        <div class="features-grid stagger-children">
            <div class="feature-card fade-up">
                <i class="fas fa-handshake feature-icon"></i>
                <h3>{% trans "Réseau de Contacts" %}</h3>
                <p>{% trans "Connectez-vous avec des milliers d'agriculteurs à travers le Sénégal. Échangez des idées, formez des partenariats stratégiques et développez un réseau professionnel solide pour faire prospérer votre exploitation." %}</p>
            </div>
            <div class="feature-card fade-up">
                <i class="fas fa-book feature-icon"></i>
                <h3>{% trans "Techniques de Conservation" %}</h3>
                <p>{% trans "Découvrez des guides pratiques, des vidéos éducatives et des innovations pour optimiser le stockage et la conservation des récoltes, réduisant ainsi les pertes post-récolte et augmentant vos bénéfices." %}</p>
            </div>
            <div class="feature-card fade-up">
                <i class="fas fa-chart-line feature-icon"></i>
                <h3>{% trans "Prix du Marché en Temps Réel" %}</h3>
                <p>{% trans "Restez informé des prix actuels des produits agricoles sur les marchés sénégalais. FarmConnect vous aide à identifier les meilleures opportunités de vente pour maximiser vos revenus." %}</p>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section id="services" class="section">
    <div class="container">
        <h2 class="section-title fade-down">{% trans "Services Communautaires" %}</h2>
        <p class="fade-up" style="text-align: center; max-width: 800px; margin: 0 auto 3rem; color: var(--text-dark);">
            {% trans "Nos services sont conçus pour répondre aux besoins des agriculteurs sénégalais, en leur offrant des outils et des ressources pour travailler plus efficacement et rester connectés." %}
        </p>
        <div class="community-grid stagger-children">
            <div class="community-card fade-left">
                <i class="fas fa-comments icon"></i>
                <h3>{% trans "Forum d'Échange" %}</h3>
                <p>{% trans "Participez à des discussions dynamiques, posez vos questions et partagez vos réussites avec d'autres agriculteurs. Bénéficiez des conseils d'experts pour résoudre vos défis agricoles." %}</p>
            </div>
            <div class="community-card fade-up">
                <i class="fas fa-mobile-alt icon"></i>
                <h3>{% trans "Application Mobile" %}</h3>
                <p>{% trans "Accédez à FarmConnect où que vous soyez : consultez les prix, connectez-vous à la communauté, recevez des alertes météo et explorez nos ressources directement depuis votre smartphone." %}</p>
            </div>
            <div class="community-card fade-right">
                <i class="fas fa-bell icon"></i>
                <h3>{% trans "Alertes Personnalisées" %}</h3>
                <p>{% trans "Recevez des notifications sur les variations de prix, les opportunités de marché, les alertes météo et les formations locales pour rester toujours un pas en avant." %}</p>
            </div>
        </div>
    </div>
</section>

<!-- Workshops Section -->
<section id="workshops" class="section">
    <div class="container">
        <h2 class="section-title fade-down">{% trans "Ateliers et Formations" %}</h2>
        <img src="{% static 'img/workshop.jpg' %}"
             alt="{% trans 'Agriculteurs participant à un atelier de formation au Sénégal' %}"
             class="img-fluid rounded-3 my-4 scale-up"
             style="max-width: 800px; height: auto; display: block; margin: 2rem auto;">
        <p class="fade-up" style="text-align: center; max-width: 800px; margin: 0 auto 3rem; color: var(--text-dark);">
            {% trans "Participez à nos ateliers pratiques pour acquérir des compétences modernes et durables. Nos formations sont conçues pour aider les agriculteurs sénégalais à innover et à prospérer." %}
        </p>
        <div class="workshop-highlights stagger-children">
            <div class="workshop-card fade-up">
                <i class="fas fa-seedling icon"></i>
                <h3>{% trans "Agriculture Durable" %}</h3>
                <p>{% trans "Apprenez des techniques écologiques pour augmenter vos rendements tout en préservant les sols fertiles du Sénégal, pour une agriculture durable à long terme." %}</p>
            </div>
            <div class="workshop-card fade-up">
                <i class="fas fa-laptop icon"></i>
                <h3>{% trans "Technologies Modernes" %}</h3>
                <p>{% trans "Maîtrisez les outils numériques et les techniques d'agriculture de précision pour optimiser vos ressources et moderniser votre exploitation agricole." %}</p>
            </div>
            <div class="workshop-card fade-up">
                <i class="fas fa-briefcase icon"></i>
                <h3>{% trans "Gestion d'Exploitation" %}</h3>
                <p>{% trans "Développez vos compétences en gestion financière, marketing et planification pour maximiser vos profits et assurer la pérennité de votre ferme." %}</p>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="cta-section">
    <div class="container">
        <h2 class="fade-up">{% trans "Prêt à Transformer Votre Agriculture ?" %}</h2>
        <p class="fade-up">{% trans "Rejoignez des milliers d'agriculteurs sénégalais qui utilisent FarmConnect pour améliorer leurs rendements, accéder à des marchés rentables et apprendre des techniques modernes. Inscrivez-vous dès aujourd'hui et faites partie de la révolution agricole au Sénégal." %}</p>

        <div class="cta-buttons">
            {% if not user.is_authenticated %}
            <a href="{% url 'farmconnect_app:register' %}" class="btn-primary scale-up">{% trans "S'inscrire Maintenant" %}</a>
            <a href="{% url 'farmconnect_app:about' %}" class="btn-secondary scale-up">{% trans "Découvrir les Témoignages" %}</a>
            {% else %}

            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
