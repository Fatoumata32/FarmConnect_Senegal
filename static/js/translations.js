/**
 * Client-side translation system for FarmConnect Senegal
 * Supports: French (fr), Wolof (wo)
 */

const translations = {
    // Navigation
    nav_home: {
        fr: 'Accueil',
        wo: 'Biir Kër'
    },
    nav_advice: {
        fr: 'Conseils',
        wo: 'Digal'
    },
    nav_community: {
        fr: 'Communauté',
        wo: 'Mbooloo'
    },
    nav_marketplace: {
        fr: 'Marketplace',
        wo: 'Marse'
    },
    nav_investors: {
        fr: 'Investisseurs',
        wo: 'Yéeneykat'
    },
    nav_dashboard: {
        fr: 'Tableau de Bord',
        wo: 'Tablo Komand'
    },
    nav_login: {
        fr: 'Connexion',
        wo: 'Dugg'
    },
    nav_register: {
        fr: 'Inscription',
        wo: 'Bindu'
    },
    nav_tools: {
        fr: 'Outils',
        wo: 'Jumtukaay'
    },

    // Hero Section
    hero_title: {
        fr: 'Connectez-vous à l\'Agriculture Moderne',
        wo: 'Bokk ci Tàbbi bu Bees'
    },
    hero_subtitle: {
        fr: 'Votre guide intelligent pour une agriculture prospère au Sénégal',
        wo: 'Sa giday bu xam-xam ngir tàbbi bu baax ci Senegaal'
    },
    hero_button: {
        fr: 'Découvrir les Conseils',
        wo: 'Gis Digal yi'
    },

    // Stats Section
    stat_farmers: {
        fr: 'Agriculteurs Connectés',
        wo: 'Tàbbikat yu Bokk'
    },
    stat_crops: {
        fr: 'Cultures Supportées',
        wo: 'Mbey yu Ñu Jàppale'
    },
    stat_regions: {
        fr: 'Régions Couvertes',
        wo: 'Régio yu Ñu Am'
    },
    stat_support: {
        fr: 'Support Disponible',
        wo: 'Ndimbal mu Nekk'
    },

    // CTA Section
    cta_title: {
        fr: 'Prêt à Transformer Votre Agriculture ?',
        wo: 'Danga Tëye ngir Soppi Sa Tàbbi?'
    },
    cta_subtitle: {
        fr: 'Rejoignez des milliers d\'agriculteurs sénégalais qui utilisent FarmConnect pour améliorer leurs rendements',
        wo: 'Bokk ak junni tàbbikat ci Senegaal yuy jëfandikoo FarmConnect ngir yokk seen njariñ'
    },
    cta_register: {
        fr: 'S\'inscrire Gratuitement',
        wo: 'Bindu Amuloo Fey'
    },
    cta_learn_more: {
        fr: 'En Savoir Plus',
        wo: 'Xam Lu Ëpp'
    },

    // Advice Section
    advice_title: {
        fr: 'Conseils Agricoles',
        wo: 'Digal ci Tàbbi'
    },
    advice_subtitle: {
        fr: 'Découvrez nos conseils détaillés pour 15 cultures populaires du Sénégal',
        wo: 'Gis sunu digal yu mat ci 15 mbey yu bari ci Senegaal'
    },
    advice_view_all: {
        fr: 'Voir tous les conseils',
        wo: 'Gis digal yépp'
    },
    advice_season: {
        fr: 'Saison',
        wo: 'Nawet'
    },
    advice_maturity: {
        fr: 'Maturation',
        wo: 'Mag'
    },
    advice_views: {
        fr: 'vues',
        wo: 'gis'
    },
    advice_details: {
        fr: 'Voir détails',
        wo: 'Gis njëkk'
    },
    advice_no_data: {
        fr: 'Aucun conseil disponible pour le moment',
        wo: 'Amul digal ci léegi'
    },

    // Weather Section
    weather_title: {
        fr: 'Prévisions Météo - 3 Jours',
        wo: 'Xel ci Jaww - 3 Bés'
    },
    weather_subtitle: {
        fr: 'Planifiez vos activités agricoles avec des prévisions précises',
        wo: 'Doxalin sa liggéey tàbbi ak xel ci jaww bu dëgga'
    },
    weather_loading: {
        fr: 'Chargement des prévisions météo...',
        wo: 'Di yébb xel ci jaww...'
    },
    weather_today: {
        fr: 'Aujourd\'hui',
        wo: 'Tey'
    },
    weather_humidity: {
        fr: 'Humidité',
        wo: 'Taw'
    },
    weather_wind: {
        fr: 'Vent',
        wo: 'Ngelaw'
    },
    weather_rain: {
        fr: 'Pluie',
        wo: 'Taw'
    },
    weather_advice_title: {
        fr: 'Conseils Agricoles',
        wo: 'Digal ci Tàbbi'
    },
    weather_this_week: {
        fr: 'Cette Semaine',
        wo: 'Bésu Bii'
    },

    // Footer Section
    footer_title: {
        fr: 'FarmConnect Senegal',
        wo: 'FarmConnect Senegal'
    },
    footer_description: {
        fr: 'FarmConnect Senegal est dédié à l\'autonomisation des agriculteurs sénégalais grâce à une plateforme communautaire qui favorise l\'échange, l\'apprentissage et l\'innovation pour une agriculture durable et prospère.',
        wo: 'FarmConnect Senegal dafay jàppale tàbbikat yu Senegaal ci platforme bu mbooloo bu tax ñu wax, jàng ak sàmm bu bees ngir tàbbi bu yàgg.'
    },
    footer_farmers: {
        fr: '7 agriculteurs connectés',
        wo: '7 tàbbikat yu bokk'
    },
    footer_workshops: {
        fr: '100 ateliers organisés',
        wo: '100 atëliye yu defar'
    },
    footer_coverage: {
        fr: 'Présent dans tout le Sénégal',
        wo: 'Nekk ci Senegaal lépp'
    },
    footer_services: {
        fr: 'Services',
        wo: 'Liggéey'
    },
    footer_network: {
        fr: 'Réseau d\'Agriculteurs',
        wo: 'Réso bu Tàbbikat'
    },
    footer_conservation: {
        fr: 'Conservation des Récoltes',
        wo: 'Denc Mbey'
    },
    footer_market_price: {
        fr: 'Prix du Marché',
        wo: 'Njëg ci Marse'
    },
    footer_forum: {
        fr: 'Forum d\'Échange',
        wo: 'Forum bu Wax'
    },
    footer_mobile_app: {
        fr: 'Application Mobile',
        wo: 'App ci Telefon'
    },
    footer_training: {
        fr: 'Formations',
        wo: 'Jàng'
    },
    footer_sustainable_ag: {
        fr: 'Agriculture Durable',
        wo: 'Tàbbi bu Yàgg'
    },
    footer_modern_tech: {
        fr: 'Technologies Modernes',
        wo: 'Teknolooji bu Bees'
    },
    footer_farm_management: {
        fr: 'Gestion d\'Exploitation',
        wo: 'Yorkat Tàbbi'
    },
    footer_training_calendar: {
        fr: 'Calendrier des Formations',
        wo: 'Arminaatu Jàng'
    },
    footer_contact: {
        fr: 'Contact',
        wo: 'Jokkoo'
    },
    footer_phone: {
        fr: 'Téléphone',
        wo: 'Telefon'
    },
    footer_address: {
        fr: 'Adresse',
        wo: 'Adres'
    },
    footer_investors: {
        fr: '→ Page Investisseurs',
        wo: '→ Xët Yéeneykat'
    },
    footer_copyright: {
        fr: '© 2025 FarmConnect Senegal. Tous droits réservés.',
        wo: '© 2025 FarmConnect Senegal. Sañ yépp dañu leen gëm.'
    },
    footer_about: {
        fr: 'À Propos',
        wo: 'Ci Kanamu'
    },
    footer_support: {
        fr: 'Support',
        wo: 'Ndimbal'
    },
    footer_rights: {
        fr: 'Tous droits réservés.',
        wo: 'Sañ yépp dañu leen gëm.'
    },

    // Tools/Marketplace Page
    tools_title: {
        fr: 'Outils Agricoles Innovants',
        wo: 'Jumtukaay yu Tàbbi yu Bees'
    },
    tools_subtitle: {
        fr: 'Découvrez des outils modernes et abordables pour optimiser vos pratiques agricoles',
        wo: 'Gis jumtukaay yu bees te yomb ngir yokk sa tàbbi'
    },

    // Tool Names and Descriptions
    tool_tractor_title: {
        fr: 'Tracteur de Précision (John Deere 6R)',
        wo: 'Trakteer bu Xóot (John Deere 6R)'
    },
    tool_tractor_desc: {
        fr: 'Le tracteur John Deere 6R avec package de précision intègre GPS RTK, collecte de données, pulvérisateur automatisé, désherbeur mécanique et caméra multispectrale pour une agriculture de précision.',
        wo: 'Trakteer John Deere 6R ak pakeet bu xóot am GPS RTK, dajale xibaar, pulvérisateur bu bopp, désherbeur bu mekanik ak kamera multispektral ngir tàbbi bu xóot.'
    },
    tool_drone_title: {
        fr: 'Arrosage par Drone (XAG P150)',
        wo: 'Ndox ak Drone (XAG P150)'
    },
    tool_drone_desc: {
        fr: 'Les drones agricoles XAG P150 permettent une pulvérisation précise d\'eau, d\'engrais ou de pesticides, réduisant les coûts et augmentant les rendements.',
        wo: 'Drone yu tàbbi XAG P150 di jëfandikoo ndox, angare walla pestisid ak xóot, wàññi liggéey ak yokk njariñ.'
    },
    tool_solar_title: {
        fr: 'Irrigation Solaire (Bonergie SPIS)',
        wo: 'Ndox ak Jant (Bonergie SPIS)'
    },
    tool_solar_desc: {
        fr: 'Les systèmes d\'irrigation solaire Bonergie utilisent l\'énergie solaire pour alimenter des pompes à eau, offrant une irrigation durable toute l\'année.',
        wo: 'Sisteem yu ndox ak jant Bonergie di jëfandikoo kaaraw jant ngir pomp ndox, di jox ndox bu yàgg at yépp.'
    },
    tool_soil_title: {
        fr: 'Kit de Test de Sol Portable (Palintest SKW 500)',
        wo: 'Kit bu Xool Suuf (Palintest SKW 500)'
    },
    tool_soil_desc: {
        fr: 'Le SoilCare Pro permet aux agriculteurs d\'analyser le pH et les nutriments du sol directement sur le terrain, optimisant les décisions de fertilisation.',
        wo: 'SoilCare Pro di jëfandikoo ngir xool pH ak nutriment yu suuf ci tool bi, mu yokk xalaat ci angare.'
    },
    tool_drip_title: {
        fr: 'Système d\'Irrigation Goutte-à-Goutte (Netafim DripKit)',
        wo: 'Sisteem Ndox Tugu-Tugu (Netafim DripKit)'
    },
    tool_drip_desc: {
        fr: 'Le Netafim DripKit fournit de l\'eau directement aux racines des plantes, maximisant l\'efficacité de l\'eau pour les petites exploitations.',
        wo: 'Netafim DripKit di jox ndox bu jëkk ci rëdd yu garab yo, mu yokk ndox bu ñu jëfandikoo ci tàbbi bu ndaw.'
    },
    tool_fertilizer_title: {
        fr: 'Engrais Organique (BioGrow)',
        wo: 'Angare Organik (BioGrow)'
    },
    tool_fertilizer_desc: {
        fr: 'Un engrais organique à base de compost pour enrichir le sol et améliorer les rendements.',
        wo: 'Angare organik bu ñu def ak compost ngir yokk solo suuf ak njariñ.'
    },

    // Price and Payment Labels
    price_label: {
        fr: 'Prix :',
        wo: 'Njëg :'
    },
    payment_plans_label: {
        fr: 'Plans de paiement :',
        wo: 'Yoon yu Fey :'
    },
    payment_full: {
        fr: 'Paiement unique',
        wo: 'Fey benn yoon'
    },
    contact_label: {
        fr: 'Contact :',
        wo: 'Jokkoo :'
    },
    advantages_label: {
        fr: 'Avantages :',
        wo: 'Njariñ :'
    },

    // Tool Advantages
    tool_tractor_advantages: {
        fr: 'Rendements accrus, réduction des intrants, respectueux de l\'environnement, agriculture basée sur les données.',
        wo: 'Yokk njariñ, wàññi liggéey, baax ci àdduna, tàbbi bu xibaar.'
    },
    tool_drone_advantages: {
        fr: 'Précision, réduction des coûts chimiques, efficacité sur grandes surfaces.',
        wo: 'Xóot, wàññi liggéey kemik, baax ci tool yu mag.'
    },
    tool_solar_advantages: {
        fr: 'Réduction des coûts énergétiques, irrigation fiable, respectueux de l\'environnement.',
        wo: 'Wàññi liggéey kaaraw, ndox bu dëgga, baax ci àdduna.'
    },
    tool_soil_advantages: {
        fr: 'Analyse rapide, amélioration des rendements, réduction des coûts d\'engrais.',
        wo: 'Xool bu gaaw, yokk njariñ, wàññi liggéey angare.'
    },
    tool_drip_advantages: {
        fr: 'Économie d\'eau, installation facile, adapté aux petites surfaces.',
        wo: 'Sukkar ci ndox, samp bu yomb, baax ci tàbbi bu ndaw.'
    },
    tool_fertilizer_advantages: {
        fr: 'Écologique, améliore la fertilité du sol, abordable.',
        wo: 'Baax ci àdduna, yokk solo suuf, njëg bu yomb.'
    },

    // Contact Form
    contact_form_title: {
        fr: 'Contactez-nous pour plus d\'informations',
        wo: 'Jokkoo ak ñun ngir xibaar lu ëpp'
    },
    form_name: {
        fr: 'Nom :',
        wo: 'Tur :'
    },
    form_email: {
        fr: 'Email :',
        wo: 'Imeel :'
    },
    form_phone: {
        fr: 'Téléphone :',
        wo: 'Telefon :'
    },
    form_message: {
        fr: 'Message :',
        wo: 'Bataaxal :'
    },
    form_submit: {
        fr: 'Envoyer',
        wo: 'Yónnee'
    },

    // Service Labels
    service_weather: {
        fr: 'Prévisions Météo',
        wo: 'Xel ci Jaww'
    },
    service_tips: {
        fr: 'Conseils Agricoles',
        wo: 'Digal ci Tàbbi'
    },
    service_assistant: {
        fr: 'Assistant IA',
        wo: 'Ndimbalkat bu Xam'
    },
    service_community: {
        fr: 'Communauté',
        wo: 'Mbooloo'
    },

    // Support Labels
    support_help: {
        fr: 'Centre d\'Aide',
        wo: 'Kër Ndimbal'
    },
    support_contact: {
        fr: 'Contact',
        wo: 'Jokkoo'
    },
    support_faq: {
        fr: 'FAQ',
        wo: 'Laaj yu Bari'
    },
    support_feedback: {
        fr: 'Commentaires',
        wo: 'Sa Xalaat'
    },

    // Common UI Elements
    loading: {
        fr: 'Chargement...',
        wo: 'Di yébb...'
    },
    error: {
        fr: 'Erreur',
        wo: 'Njuumte'
    },
    retry: {
        fr: 'Réessayer',
        wo: 'Jéemaat'
    },
    close: {
        fr: 'Fermer',
        wo: 'Tëj'
    },
    save: {
        fr: 'Enregistrer',
        wo: 'Denc'
    },
    cancel: {
        fr: 'Annuler',
        wo: 'Nëbb'
    },
    delete: {
        fr: 'Supprimer',
        wo: 'Far'
    },
    edit: {
        fr: 'Modifier',
        wo: 'Wëlbati'
    },
    view: {
        fr: 'Voir',
        wo: 'Gis'
    },

    // Authentication
    login: {
        fr: 'Connexion',
        wo: 'Dugg'
    },
    logout: {
        fr: 'Déconnexion',
        wo: 'Génn'
    },
    register: {
        fr: 'S\'inscrire',
        wo: 'Bindu'
    },
    password: {
        fr: 'Mot de passe',
        wo: 'Baatu jàll'
    },
    email: {
        fr: 'Email',
        wo: 'Imeel'
    },

    // Profile
    profile: {
        fr: 'Mon Profil',
        wo: 'Sama Profil'
    },
    settings: {
        fr: 'Paramètres',
        wo: 'Tànneefu'
    },

    // App Title
    app_title: {
        fr: 'FarmConnect Senegal',
        wo: 'FarmConnect Senegal'
    }
};

/**
 * Change the current language
 * @param {string} lang - Language code (fr, wo)
 */
function changeLanguage(lang) {
    if (!['fr', 'wo'].includes(lang)) {
        console.error('Invalid language code:', lang);
        return;
    }

    console.log('[Translation] Changing language to:', lang);

    // Update all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[key] && translations[key][lang]) {
            // Simply replace the text content
            element.textContent = translations[key][lang];
        }
    });

    // Update language display
    const langDisplay = {
        'fr': 'FR',
        'wo': 'WO'
    };

    const currentLangElem = document.getElementById('current-lang');
    if (currentLangElem) {
        currentLangElem.textContent = langDisplay[lang];
    }

    // Update checkmarks
    ['fr', 'wo'].forEach(l => {
        const check = document.getElementById('check-' + l);
        if (check) {
            check.style.display = (l === lang) ? 'inline' : 'none';
        }
    });

    // Save preference
    localStorage.setItem('preferred_language', lang);

    console.log('[Translation] Language changed successfully to:', lang);
}

/**
 * Initialize language on page load
 */
document.addEventListener('DOMContentLoaded', function() {
    // Get saved language or default to French
    let savedLang = localStorage.getItem('preferred_language') || 'fr';

    // If saved language is English (from before), default to French
    if (savedLang === 'en') {
        savedLang = 'fr';
        localStorage.setItem('preferred_language', 'fr');
    }

    console.log('[Translation] Initializing with language:', savedLang);

    // Apply saved language
    changeLanguage(savedLang);
});
